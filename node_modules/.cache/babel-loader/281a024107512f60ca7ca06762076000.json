{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\inaki\\\\OneDrive\\\\Documents\\\\Cours M2\\\\CSL\\\\projet_CSL\\\\nantes_prison_manager\\\\src\\\\view\\\\condamnation.js\";\nimport React from 'react';\n\nfunction objectsEquals(o1, o2) {\n  return Object.keys(o1).length === Object.keys(o2).length && Object.keys(o1).every(p => o1[p] === o2[p]);\n}\n\nexport default class Condamnation extends React.Component {\n  constructor() {\n    super();\n\n    this.compare = (a, b) => {\n      const nameA = a.lastname.toUpperCase();\n      const nameB = b.lastname.toUpperCase();\n      let comparison = 0;\n\n      if (nameA > nameB) {\n        comparison = 1;\n      } else if (nameA < nameB) {\n        comparison = -1;\n      }\n\n      return comparison;\n    };\n\n    this.createSelectItems = array => {\n      console.log(array);\n      let options = [];\n\n      for (let i = 0; i < array.length; i++) {\n        options.push( /*#__PURE__*/_jsxDEV(\"option\", {\n          value: array[i].lastname + \" \" + array[i].firstname,\n          children: array[i].lastname + \" \" + array[i].firstname\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 26\n        }, this));\n      }\n\n      return options;\n    };\n\n    this.state = {\n      prisoners: [],\n      prisoners_updated: false\n    };\n  }\n\n  async componentDidMount() {\n    if (!this.state.prisoners_updated) {\n      this.getPrisoners();\n    }\n  }\n\n  async getPrisoners() {\n    await fetch('http://localhost:8080/prisoners/read', {\n      method: 'GET'\n    }) // Envoi requete au serveur\n    .then(res => res.json()) // Reponse de la requete\n    .then(out => {\n      // Données a recuperer\n      if (!objectsEquals(out, this.state.prisoners)) {\n        this.setState({\n          prisoners: out.result,\n          prisoners_updated: true\n        });\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Date decision : \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"date_decision\",\n          type: \"text\",\n          placeholder: \"dd/mm/aaaa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Choisir prisonier :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          children: this.createSelectItems(this.state.prisoners)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duree emprisonnement : \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"duree_decision\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/inaki/OneDrive/Documents/Cours M2/CSL/projet_CSL/nantes_prison_manager/src/view/condamnation.js"],"names":["React","objectsEquals","o1","o2","Object","keys","length","every","p","Condamnation","Component","constructor","compare","a","b","nameA","lastname","toUpperCase","nameB","comparison","createSelectItems","array","console","log","options","i","push","firstname","state","prisoners","prisoners_updated","componentDidMount","getPrisoners","fetch","method","then","res","json","out","setState","result","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nfunction objectsEquals(o1, o2){\r\n    return(Object.keys(o1).length === Object.keys(o2).length \r\n              && Object.keys(o1).every(p => o1[p] === o2[p]));\r\n}\r\n\r\nexport default class Condamnation extends React.Component{\r\n\r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            prisoners: [],\r\n            prisoners_updated: false\r\n        }\r\n    }\r\n\r\n    async componentDidMount(){\r\n        if(!this.state.prisoners_updated){\r\n            this.getPrisoners();\r\n          }\r\n    }\r\n\r\n    async getPrisoners(){\r\n        await fetch('http://localhost:8080/prisoners/read', {method: 'GET'}) // Envoi requete au serveur\r\n              .then(res => res.json()) // Reponse de la requete\r\n              .then((out) => { // Données a recuperer\r\n                    if(!objectsEquals(out, this.state.prisoners)){\r\n                        this.setState({prisoners: out.result, prisoners_updated: true});\r\n                    }\r\n              });\r\n    }\r\n\r\n    compare = (a,b) => {\r\n        const nameA = a.lastname.toUpperCase();\r\n        const nameB = b.lastname.toUpperCase();\r\n\r\n        let comparison = 0;\r\n        if (nameA > nameB) {\r\n            comparison = 1;\r\n        } else if (nameA < nameB) {\r\n            comparison = -1;\r\n        }\r\n        return comparison;\r\n    }\r\n\r\n    createSelectItems = (array) => {\r\n        console.log(array);\r\n        let options = [];\r\n        for(let i=0; i<array.length; i++){\r\n            options.push(<option key={i} value={array[i].lastname +\" \"+ array[i].firstname}>{array[i].lastname + \" \" + array[i].firstname}</option>)\r\n        }\r\n        return options;\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <div>\r\n                    <p>Date decision : </p>\r\n                    <input id=\"date_decision\" type=\"text\" placeholder=\"dd/mm/aaaa\"></input>\r\n                </div>\r\n                <div>\r\n                    <p>Choisir prisonier :</p>\r\n                    <select>\r\n                        {this.createSelectItems(this.state.prisoners)}\r\n                    </select>\r\n                </div>\r\n                <div>\r\n                    <p>Duree emprisonnement : </p>\r\n                    <input id=\"duree_decision\" type=\"text\"></input>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}